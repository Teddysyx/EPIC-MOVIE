<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>EPIC MOVIE</title>
<script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
<style>
body { background:#0d0d0d; color:white; font-family:sans-serif; padding:20px; }
input { width:100%; padding:8px; margin-bottom:15px; border-radius:5px; border:none; }
.grid { display:grid; grid-template-columns:repeat(auto-fill,minmax(100px,1fr)); gap:10px; }
.card { background:#222; padding:10px; border-radius:5px; cursor:pointer; transition: transform .2s; }
.card:hover { transform:scale(1.05); }
video { display:block; margin:20px auto; max-width:100%; border-radius:10px; }
</style>
</head>
<body>
<h1 style="text-align:center;">EPIC MOVIE</h1>
<input type="text" id="search" placeholder="Vyhledat film...">
<div id="list" class="grid">Načítám...</div>
<video id="video" controls></video>

<script>
const M3U_URL = 'https://pastebin.com/raw/zKSiSwfd'; // tvůj pastebin

let movies = [];

function parseM3U(text){
  const lines = text.split('\n').map(l=>l.trim()).filter(Boolean);
  const arr = [];
  for(let i=0;i<lines.length;i++){
    if(lines[i].startsWith('#EXTINF')){
      const name = (lines[i].match(/,(.*)$/)||[,'Unknown'])[1];
      const url = lines[i+1];
      if(url) arr.push({name, url});
    }
  }
  return arr;
}

function renderList(filter=''){
  const container = document.getElementById('list');
  container.innerHTML = '';
  movies.filter(m=>m.name.toLowerCase().includes(filter.toLowerCase())).forEach(m=>{
    const div = document.createElement('div');
    div.className='card';
    div.textContent = m.name;
    div.onclick = ()=>playStream(m.url);
    container.appendChild(div);
  });
}

function playStream(url){
  const video = document.getElementById('video');
  if(Hls.isSupported()){
    const hls = new Hls();
    hls.loadSource(url);
    hls.attachMedia(video);
  } else {
    video.src = url;
  }
  video.play();
}

fetch(M3U_URL).then(r=>r.text()).then(t=>{
  movies = parseM3U(t);
  renderList();
});

document.getElementById('search').addEventListener('input', e=>{
  renderList(e.target.value);
});
</script>
</body>
</html>